# –õ–µ–∫—Ü–∏—è 4. –í–≤–µ–¥–µ–Ω–∏–µ –≤ –∞—Å–ø–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏ Spring

–ê—Å–ø–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ (AOP, Aspect-Oriented Programming) ‚Äî —ç—Ç–æ –ø–∞—Ä–∞–¥–∏–≥–º–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–¥–µ–ª—è—Ç—å —Å–∫–≤–æ–∑–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (cross-cutting concerns) –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏.

+ –°–∫–≤–æ–∑–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å ‚Äî —ç—Ç–æ –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–æ–¥—É–ª–µ–π —Å–∏—Å—Ç–µ–º—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫).
+ –ë–µ–∑ AOP –∫–æ–¥ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –≤ —Ä–∞–∑–Ω—ã—Ö –∫–ª–∞—Å—Å–∞—Ö, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—é –∏ –∑–∞—Ç—Ä—É–¥–Ω—è–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É.
+ –° AOP —Ç–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã, —á—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –∫–æ–¥ –∏ –¥–µ–ª–∞–µ—Ç –µ–≥–æ –±–æ–ª–µ–µ —á–∏—Ç–∞–µ–º—ã–º.

AOP –≤ Spring –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è:

+ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (Logging)
+ –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏ (Transaction Management)
+ –û–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π (Exception Handling)
+ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è (Caching)
+ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (Security)

## –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è AOP

+ –ê—Å–ø–µ–∫—Ç (aspect): –ú–æ–¥—É–ª—å–Ω–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (concern), –∫–æ—Ç–æ—Ä–∞—è –æ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª–∞—Å—Å–æ–≤. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏ —è–≤–ª—è–µ—Ç—Å—è —Ö–æ—Ä–æ—à–∏–º –ø—Ä–∏–º–µ—Ä–æ–º —Å–∫–≤–æ–∑–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –≤ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö. –í Spring AOP –∞—Å–ø–µ–∫—Ç—ã —Ä–µ–∞–ª–∏–∑—É—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –æ–±—ã—á–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤ (–ø–æ–¥—Ö–æ–¥ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ö–µ–º) –∏–ª–∏ –æ–±—ã—á–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤, –∞–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–Ω–Ω–æ—Ç–∞—Ü–∏–µ–π @Aspect (—Å—Ç–∏–ª—å @AspectJ).

+ –¢–æ—á–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (joint point): –¢–æ—á–∫–∞ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ –∏–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏—è. –í Spring AOP —Ç–æ—á–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤—Å–µ–≥–¥–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞.

+ Advice: –î–µ–π—Å—Ç–≤–∏–µ, –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞–µ–º–æ–µ –∞—Å–ø–µ–∫—Ç–æ–º –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —Ç–æ—á–∫–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –†–∞–∑–ª–∏—á–Ω—ã–µ –≤–∏–¥—ã Advice –≤–∫–ª—é—á–∞—é—Ç Advice "–≤–º–µ—Å—Ç–æ (around)", "–ø–µ—Ä–µ–¥ (before)" –∏ "–ø–æ—Å–ª–µ (after)". (–¢–∏–ø—ã Advice –±—É–¥—É—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω—ã –¥–∞–ª—å—à–µ). –ú–Ω–æ–≥–∏–µ –ê–û–ü-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏, –≤–∫–ª—é—á–∞—è Spring, –º–æ–¥–µ–ª–∏—Ä—É—é—Ç Advice –∫–∞–∫ –ø–µ—Ä–µ—Ö–≤–∞—Ç—á–∏–∫ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç —Ü–µ–ø–æ—á–∫—É –ø–µ—Ä–µ—Ö–≤–∞—Ç—á–∏–∫–æ–≤ –≤–º–µ—Å—Ç–æ —Ç–æ—á–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.

+ –°—Ä–µ–∑ (pointcut): –ü—Ä–µ–¥–∏–∫–∞—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç–æ—á–∫–∞–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. Advice —Å–≤—è–∑–∞–Ω —Å –≤—ã—Ä–∞–∂–µ–Ω–∏–µ–º —Å—Ä–µ–∑–∞ –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –ª—é–±–æ–π —Ç–æ—á–∫–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, —Å–æ–≤–ø–∞–¥–∞—é—â–µ–π —Å–æ —Å—Ä–µ–∑–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –∏–º–µ–Ω–µ–º). –ö–æ–Ω—Ü–µ–ø—Ü–∏—è —Ç–æ—á–µ–∫ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏ —Å—Ä–µ–∑–∞, —è–≤–ª—è–µ—Ç—Å—è —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π –≤ –ê–û–ü, –∞ Spring –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —è–∑—ã–∫ –≤—ã—Ä–∞–∂–µ–Ω–∏–π —Å—Ä–µ–∑–æ–≤ AspectJ.

+ –í–≤–µ–¥–µ–Ω–∏–µ (introduction): –û–±—ä—è–≤–ª–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –∏–ª–∏ –ø–æ–ª–µ–π –æ—Ç –∏–º–µ–Ω–∏ —Ç–∏–ø–∞. Spring AOP –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º –≤–Ω–µ–¥—Ä—è—Ç—å –Ω–æ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é) –≤ –ª—é–±–æ–π —Å–Ω–∞–±–∂–µ–Ω–Ω—ã–π Advice-–æ–º –æ–±—ä–µ–∫—Ç. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–≤–µ–¥–µ–Ω–∏–µ, —á—Ç–æ–±—ã –≤ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ –±–∏–Ω —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞–ª –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å IsModified –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è. (–í —Å–æ–æ–±—â–µ—Å—Ç–≤–µ AspectJ –≤–≤–µ–¥–µ–Ω–∏–µ –∏–∑–≤–µ—Å—Ç–Ω–æ –∫–∞–∫ –º–µ–∂—Ç–∏–ø–æ–≤–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ).

+ –¶–µ–ª–µ–≤–æ–π –æ–±—ä–µ–∫—Ç (Target object): –û–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–Ω–∞–±–∂–∞–µ—Ç—Å—è Advice-–æ–º –ø–æ –æ–¥–Ω–æ–º—É –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –∞—Å–ø–µ–∫—Ç–∞–º. –¢–∞–∫–∂–µ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è "—Å–Ω–∞–±–∂–∞–µ–º—ã–π Advice-–æ–º –æ–±—ä–µ–∫—Ç". –ü–æ—Å–∫–æ–ª—å–∫—É Spring AOP —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–∫—Å–∏, —ç—Ç–æ—Ç –æ–±—ä–µ–∫—Ç –≤—Å–µ–≥–¥–∞ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –æ–±—ä–µ–∫—Ç–æ–º.

+ –ü—Ä–æ–∫—Å–∏ –ê–û–ü: –û–±—ä–µ–∫—Ç, —Å–æ–∑–¥–∞–≤–∞–µ–º—ã–π –ê–û–ü-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–º –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∞—Å–ø–µ–∫—Ç–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (—Å–Ω–∞–±–∂–∞–µ—Ç Advice-–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ). –í Spring Framework –ø—Ä–æ–∫—Å–∏ –ê–û–ü ‚Äì —ç—Ç–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø—Ä–æ–∫—Å–∏ JDK –∏–ª–∏ –ø—Ä–æ–∫—Å–∏ CGLIB.

+ –°–≤—è–∑—ã–≤–∞–Ω–∏–µ (weaving): —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ –∞—Å–ø–µ–∫—Ç–æ–≤ —Å –¥—Ä—É–≥–∏–º–∏ —Ç–∏–ø–∞–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏–ª–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–Ω–∞–±–∂–µ–Ω–Ω–æ–≥–æ —Å–æ–≤–µ—Ç–æ–º –æ–±—ä–µ–∫—Ç–∞. –û–Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–æ –≤–æ –≤—Ä–µ–º—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –ø–æ–º–æ—â—å—é –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ AspectJ), –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–ª–∏ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã. Spring AOP, –∫–∞–∫ –∏ –¥—Ä—É–≥–∏–µ —á–∏—Å—Ç—ã–µ –ê–û–ü-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ –Ω–∞ Java, –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã.

üìå –í–∏–¥—ã Advice (—Å–æ–≤–µ—Ç–æ–≤) –≤ AOP

–í–∏–¥ —Å–æ–≤–µ—Ç–∞ –û–ø–∏—Å–∞–Ω–∏–µ
@Before –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º –º–µ—Ç–æ–¥–∞
@After –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ –º–µ—Ç–æ–¥–∞
@AfterReturning –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –µ—Å–ª–∏ –º–µ—Ç–æ–¥ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —É—Å–ø–µ—à–Ω–æ
@AfterThrowing –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –µ—Å–ª–∏ –º–µ—Ç–æ–¥ –≤—ã–±—Ä–æ—Å–∏–ª –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
@Around –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å: –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–æ –∏ –ø–æ—Å–ª–µ –º–µ—Ç–æ–¥–∞

üìå –ü—Ä–∏–º–µ—Ä AOP –≤ Spring

1Ô∏è‚É£ –ü–æ–¥–∫–ª—é—á–∞–µ–º AOP –≤ pom.xml (Spring Boot)

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Spring Boot, –¥–æ–±–∞–≤—å—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å:

<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-aop</artifactId>
</dependency>

2Ô∏è‚É£ –°–æ–∑–¥–∞—ë–º —Å–µ—Ä–≤–∏—Å (MyService)

–≠—Ç–æ –æ–±—ã—á–Ω—ã–π Spring-–±–∏–Ω, –≤ –∫–æ—Ç–æ—Ä—ã–π –º—ã –¥–æ–±–∞–≤–∏–º –∞—Å–ø–µ–∫—Ç.

import org.springframework.stereotype.Service;

@Service
public class MyService {

    public void doWork() {
        System.out.println("üìå –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ doWork()");
    }
}

3Ô∏è‚É£ –°–æ–∑–¥–∞—ë–º –∞—Å–ø–µ–∫—Ç (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)

–ê—Å–ø–µ–∫—Ç –±—É–¥–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—ã–∑–æ–≤—ã –º–µ—Ç–æ–¥–æ–≤ –ø–µ—Ä–µ–¥ –∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º.

import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;
import org.springframework.stereotype.Component;

@Aspect
@Component
public class LoggingAspect {

    @Before("execution(* com.example.service.MyService.*(..))") // –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º –≤—Å–µ –º–µ—Ç–æ–¥—ã MyService
    public void logBeforeMethod() {
        System.out.println("üîç –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: –º–µ—Ç–æ–¥ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è...");
    }
}

4Ô∏è‚É£ –í–∫–ª—é—á–∞–µ–º AOP –≤ @Configuration

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Spring Boot, —ç—Ç–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ (AOP –≤–∫–ª—é—á–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).

–î–ª—è –æ–±—ã—á–Ω–æ–≥–æ Spring-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ–±–∞–≤—å—Ç–µ:

import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.EnableAspectJAutoProxy;

@Configuration
@EnableAspectJAutoProxy  // –í–∫–ª—é—á–∞–µ–º AOP
public class AppConfig {
}

5Ô∏è‚É£ –¢–µ—Å—Ç–∏—Ä—É–µ–º

–ó–∞–ø—É—Å–∫–∞–µ–º Spring-–∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ –≤—ã–∑—ã–≤–∞–µ–º doWork().

import org.springframework.boot.CommandLineRunner;
import org.springframework.stereotype.Component;

@Component
public class AppRunner implements CommandLineRunner {

    private final MyService myService;

    public AppRunner(MyService myService) {
        this.myService = myService;
    }

    @Override
    public void run(String... args) {
        myService.doWork();
    }
}

‚è© –í—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª–∏:

üîç –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: –º–µ—Ç–æ–¥ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è...
üìå –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ doWork()

‚úÖ –°–æ–≤–µ—Ç @Before —Å—Ä–∞–±–æ—Ç–∞–ª –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º –º–µ—Ç–æ–¥–∞ doWork().

üìå –ü—Ä–∏–º–µ—Ä—ã –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤ Advice

@AfterReturning (–µ—Å–ª–∏ –º–µ—Ç–æ–¥ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è)

@AfterReturning("execution(*com.example.service.MyService.*(..))")
public void logAfterReturning() {
    System.out.println("‚úÖ –ú–µ—Ç–æ–¥ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —É—Å–ø–µ—à–Ω–æ!");
}

‚è© –í—ã–≤–æ–¥:

üîç –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: –º–µ—Ç–æ–¥ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è...
üìå –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ doWork()
‚úÖ –ú–µ—Ç–æ–¥ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —É—Å–ø–µ—à–Ω–æ!

@AfterThrowing (–µ—Å–ª–∏ –º–µ—Ç–æ–¥ –≤—ã–±—Ä–æ—Å–∏–ª –∏—Å–∫–ª—é—á–µ–Ω–∏–µ)

@AfterThrowing("execution(*com.example.service.MyService.*(..))")
public void logAfterException() {
    System.out.println("‚ùå –ú–µ—Ç–æ–¥ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –æ—à–∏–±–∫–æ–π!");
}

@Around (–ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ –∏ –ø–æ—Å–ª–µ –º–µ—Ç–æ–¥–∞)

@Around("execution(*com.example.service.MyService.*(..))")
public Object logAround(ProceedingJoinPoint joinPoint) throws Throwable {
    System.out.println("üîÅ –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã –º–µ—Ç–æ–¥–∞...");
    Object result = joinPoint.proceed();  // –í—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞
    System.out.println("üîÅ –ú–µ—Ç–æ–¥ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è.");
    return result;
}

‚è© –í—ã–≤–æ–¥:

üîÅ –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã –º–µ—Ç–æ–¥–∞...
üìå –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ doWork()
üîÅ –ú–µ—Ç–æ–¥ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è.

‚úÖ –≠—Ç–æ—Ç —Å–ø–æ—Å–æ–± –¥–∞—ë—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –º–µ—Ç–æ–¥–∞.

üìå –ò—Ç–æ–≥

‚úÖ Spring AOP –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–¥–µ–ª–∏—Ç—å —Å–∫–≤–æ–∑–Ω—É—é –ª–æ–≥–∏–∫—É –æ—Ç –±–∏–∑–Ω–µ—Å-–∫–æ–¥–∞
‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏: @Aspect, @Before, @After, @Around, @AfterReturning, @AfterThrowing
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π, –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

üîπ –ï—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã? –ü–∏—à–∏ ‚Äî —Ä–∞–∑–±–µ—Ä—ë–º –ø–æ–¥—Ä–æ–±–Ω–µ–µ! üöÄ
